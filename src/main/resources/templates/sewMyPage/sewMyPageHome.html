<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Sew</title>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Teko:300&display=swap&subset=devanagari,latin-ext" rel="stylesheet">
<link rel="icon" th:href="@{img/logo/favicon.png}">
<link th:href="@{vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">
<link rel="stylesheet" th:href="@{css/open-iconic-bootstrap.min.css}">
<link rel="stylesheet" th:href="@{css/animate.css}">
<link rel="stylesheet" th:href="@{css/owl.carousel.min.css}">
<link rel="stylesheet" th:href="@{css/owl.theme.default.min.css}">
<link rel="stylesheet" th:href="@{css/magnific-popup.css}">
<link rel="stylesheet" th:href="@{css/aos.css}">
<link rel="stylesheet" th:href="@{css/ionicons.min.css}">
<link rel="stylesheet" th:href="@{css/bootstrap-datepicker.css}">
<link rel="stylesheet" th:href="@{css/jquery.timepicker.css}">
<link rel="stylesheet" th:href="@{css/flaticon.css}">
<link rel="stylesheet" th:href="@{css/icomoon.css}">
<link rel="stylesheet" th:href="@{css/style.css}">
<link rel="stylesheet" th:href="@{slick/slick.css}">
<link rel="stylesheet" th:href="@{slick/slick-theme.css}">
<link rel="stylesheet" th:href="@{css/slider.css}">
<link rel="stylesheet" th:href="@{css/nav.css}">
<link rel="stylesheet" th:href="@{css/join.css}">
<link rel="stylesheet" th:href="@{css/sewMyPage.css}">

</head>
<body>
	<nav
		class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light"
		id="ftco-navbar" th:replace="sewNav::nav"></nav>
	<!-- END nav -->

	<!-- Join Form -->
	<section class="ftco-section ftco-product">
		<div class="container">
			<div class="myPageContainer">
				<div id="aside" class="myPageSide"
					th:replace="sewMyPage/sewMyPageSideNav::side"></div>
				<div class="mainBox">
					<div class="spot">
						<ul>
							<li class="ship1 ">
								<div class="inner">
									<span class="ico"><i class="fas fa-truck fa-2x"></i></span>
									<dl>
										<dt>배송중</dt>
										<dd class="com_num beforeDelivery">
											<em class="num">0</em>
										</dd>
									</dl>
								</div> <!--N=a:top:pay-->
							</li>
							<li class="ship2 ">
								<div class="inner">
									<span class="ico"><i class="fas fa-box fa-2x"></i></span>
									<dl>
										<dt>배송완료</dt>
										<dd class="com_num _afterDelivery">
											<em class="num">0</em>
										</dd>
									</dl>
								</div> <!--N=a:top:delivery-->
							</li>
							<li class="ship3 ">
								<div class="inner">
									<span class="ico"><i class="fas fa-undo fa-2x"></i></span>
									<dl>
										<dt>취소/반품/교환</dt>
										<dd class="com_num inClaim">
											<em class="num">0</em>
										</dd>
									</dl>
								</div> <!--N=a:top:claim-->
							</li>
						</ul>
					</div>
					<div class="listRoot">
						<div class="ask_sc">
							<table cellpadding="0" cellspacing="0" border="0" class="terms">
								<colgroup>
									<col>
									<col width="243">
									<col width="100">
									<col width="62">
								</colgroup>
								<tbody>
									<tr>
										<td>
											<div class="month_area">
												<ul class="month_list">
													<li class="_rangeQuickSelectorLi"
														id="_rangeQuickSelectorLi0"><a
														id="_rangeQuickSelectorA0" href="#"
														class="_click(nmp.front.order.timeline.home.list.date.clickRangeQuickSelector(0)) _stopDefault">5월</a>
														<!--N=a:top.6m--></li>
													<li class="_rangeQuickSelectorLi"
														id="_rangeQuickSelectorLi1"><a
														id="_rangeQuickSelectorA1" href="#"
														class="_click(nmp.front.order.timeline.home.list.date.clickRangeQuickSelector(1)) _stopDefault">6월</a>
														<!--N=a:top.5m--></li>
													<li class="_rangeQuickSelectorLi"
														id="_rangeQuickSelectorLi2"><a
														id="_rangeQuickSelectorA2" href="#"
														class="_click(nmp.front.order.timeline.home.list.date.clickRangeQuickSelector(2)) _stopDefault">7월</a>
														<!--N=a:top.4m--></li>
													<li class="_rangeQuickSelectorLi"
														id="_rangeQuickSelectorLi3"><a
														id="_rangeQuickSelectorA3" href="#"
														class="_click(nmp.front.order.timeline.home.list.date.clickRangeQuickSelector(3)) _stopDefault">8월</a>
														<!--N=a:top.3m--></li>
													<li class="_rangeQuickSelectorLi"
														id="_rangeQuickSelectorLi4"><a
														id="_rangeQuickSelectorA4" href="#"
														class="_click(nmp.front.order.timeline.home.list.date.clickRangeQuickSelector(4)) _stopDefault">9월</a>
														<!--N=a:top.2m--></li>
													<li class="_rangeQuickSelectorLi"
														id="_rangeQuickSelectorLi5"><a
														id="_rangeQuickSelectorA5" href="#"
														class="_click(nmp.front.order.timeline.home.list.date.clickRangeQuickSelector(5)) _stopDefault">10월</a>
														<!--N=a:top.1m--></li>
												</ul>
											</div>
										</td>
										<td>
											<div id="_rangeDateArea" class="date">
												<a href="#" id="_rangeFromDateA" class="d_bx"><span
													id="_rangeFromDateSpan">2019.07.01</span><span class="ico"></span><input
													type="hidden" id="_rangeFromDateInput"
													name="range.fromDate" value="2019.07.01" readonly=""></a>
												<!--N=a:top.sdate-->
												<span class="dash">~</span> <a href="#" id="_rangeToDateA"
													class="d_bx"><span id="_rangeToDateSpan">2019.07.01</span><span
													class="ico"></span><input type="hidden"
													id="_rangeToDateInput" name="range.toDate"
													value="2019.07.01" readonly=""></a>
												<!--N=a:top.edate-->
												<div id="chku_calendar1" class="chku_calendar"
													style="right: 0px; top: 29px; display: none; z-index: 1;">
													<div class="chku_mth">
														<a href="#" class="calendar-btn-prev-mon">이전</a> <span
															class="calendar-title-year"><span class="y2"><span
																class="hidden">2</span></span><span class="y0"><span
																class="hidden">0</span></span><span class="y1"><span
																class="hidden">1</span></span><span class="y9"><span
																class="hidden">9</span></span></span> <strong
															class="calendar-title-month m05"></strong> <a href="#"
															class="calendar-btn-next-mon">다음</a>
													</div>
													<div class="chku_day">
														<table cellpadding="0" cellspacing="0" border="0">
															<thead>
																<tr>
																	<th scope="col"><span>일</span></th>
																	<th scope="col"><span>월</span></th>
																	<th scope="col"><span>화</span></th>
																	<th scope="col"><span>수</span></th>
																	<th scope="col"><span>목</span></th>
																	<th scope="col"><span>금</span></th>
																	<th scope="col"><span>토</span></th>
																</tr>
															</thead>
															<tbody>
																<tr class="calendar-week">
																	<td class="calendar-prev-mon calendar-sun"><a
																		class="calendar-date" href="#">28</a></td>
																	<td class="calendar-prev-mon"><a
																		class="calendar-date" href="#">29</a></td>
																	<td class="calendar-prev-mon"><a
																		class="calendar-date" href="#">30</a></td>
																	<td><a class="calendar-date" href="#">1</a></td>
																	<td><a class="calendar-date" href="#">2</a></td>
																	<td><a class="calendar-date" href="#">3</a></td>
																	<td class="calendar-sat"><a class="calendar-date"
																		href="#">4</a></td>
																</tr>
																<tr class="calendar-week">
																	<td class="calendar-sun"><a class="calendar-date"
																		href="#">5</a></td>
																	<td><a class="calendar-date" href="#">6</a></td>
																	<td><a class="calendar-date" href="#">7</a></td>
																	<td><a class="calendar-date" href="#">8</a></td>
																	<td><a class="calendar-date" href="#">9</a></td>
																	<td class=""><a class="calendar-date" href="#">10</a></td>
																	<td class="calendar-sat calendar-over"><a
																		class="calendar-date" href="#">11</a></td>
																</tr>
																<tr class="calendar-week">
																	<td class="calendar-sun"><a class="calendar-date"
																		href="#">12</a></td>
																	<td><a class="calendar-date" href="#">13</a></td>
																	<td><a class="calendar-date" href="#">14</a></td>
																	<td><a class="calendar-date" href="#">15</a></td>
																	<td><a class="calendar-date" href="#">16</a></td>
																	<td><a class="calendar-date" href="#">17</a></td>
																	<td class="calendar-sat"><a class="calendar-date"
																		href="#">18</a></td>
																</tr>
																<tr class="calendar-week">
																	<td class="calendar-sun"><a class="calendar-date"
																		href="#">19</a></td>
																	<td><a class="calendar-date" href="#">20</a></td>
																	<td><a class="calendar-date" href="#">21</a></td>
																	<td><a class="calendar-date" href="#">22</a></td>
																	<td><a class="calendar-date" href="#">23</a></td>
																	<td><a class="calendar-date" href="#">24</a></td>
																	<td class="calendar-sat"><a class="calendar-date"
																		href="#">25</a></td>
																</tr>
																<tr class="calendar-week">
																	<td class="calendar-sun"><a class="calendar-date"
																		href="#">26</a></td>
																	<td><a class="calendar-date" href="#">27</a></td>
																	<td><a class="calendar-date" href="#">28</a></td>
																	<td><a class="calendar-date" href="#">29</a></td>
																	<td><a class="calendar-date" href="#">30</a></td>
																	<td><a class="calendar-date" href="#">31</a></td>
																	<td class="calendar-next-mon calendar-sat"><a
																		class="calendar-date" href="#">1</a></td>
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
										</td>
										<td>
											<div class="select">
												<div id="s2" class="">
													<select class="selectbox-source"><option
															value="ALL" class="selectbox-default">전체상태</option>
														<option value="ALL"
															class="selectbox-option-group-SHOPPING">전체상태</option>
														<option value="SHOPPING__PAY_WAITING"
															class="selectbox-option-group-SHOPPING">입금확인중</option>
														<option value="SHOPPING__PAYED"
															class="selectbox-option-group-SHOPPING">결제완료</option>
														<option value="SHOPPING__DELIVERY"
															class="selectbox-option-group-SHOPPING">배송확인</option>
														<option value="SHOPPING__PURCHASE_DECIDED"
															class="selectbox-option-group-SHOPPING">구매완료</option>
														<option value="SHOPPING__CANCEL"
															class="selectbox-option-group-SHOPPING">취소</option>
														<option value="SHOPPING__RETURN"
															class="selectbox-option-group-SHOPPING">반품</option>
														<option value="SHOPPING__EXCHANGE"
															class="selectbox-option-group-SHOPPING">교환</option></select> <select
														name="statusGroup" class="selectbox-source-option-group"
														style="position: absolute; left: -9999px;">
													</select>
													<div class="selectbox-box">
														<div class="selectbox-label" unselectable="on">배송확인</div>
													</div>
												</div>
												<span class="ico"></span>
											</div>
										</td>
										<td class="btn">
											<button class="btn_srch">조회</button> <!--N=a:top.done-->
										</td>
									</tr>
								</tbody>
							</table>
						</div>					
						<div th:if="${orderList==0}" class="sub_sc" style="height: auto;">
							<div id="listContentArea">
								<div class="goods_pay_section ">
									<div class="goods_group">
										<ul class="goods_group_list">
											<li class="goods_pay_item" style="text-align: center;">
												구매 내역이 없습니다.
											</li>
										</ul>
									</div>		
								</div>								
							</div>
						</div>
						<div th:unless="${orderList==0}" class="sub_sc" style="height: auto;">
							<div id="listContentArea"></div>
						</div>
						<div class="viewmore_btn_section" id="moreButton">							
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- END Join Form -->

	<footer th:replace="sewFooter::footer"
		class="ftco-footer bg-light ftco-section"></footer>
	<!-- loader -->
	<div id="ftco-loader" class="show fullscreen">
		<svg class="circular" width="48px" height="48px">
			<circle class="path-bg" cx="24" cy="24" r="22" fill="none"
				stroke-width="4" stroke="#eeeeee" />
			<circle class="path" cx="24" cy="24" r="22" fill="none"
				stroke-width="4" stroke-miterlimit="10" stroke="#F96D00" /></svg>
	</div>

	<script th:src="@{js/jquery.min.js}"></script>
	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script th:src="@{js/popper.min.js}"></script>
	<script th:src="@{js/bootstrap.min.js}"></script>
	<script th:src="@{js/jquery.easing.1.3.js}"></script>
	<script th:src="@{js/jquery.waypoints.min.js}"></script>
	<script th:src="@{js/jquery.stellar.min.js}"></script>
	<script th:src="@{js/owl.carousel.min.js}"></script>
	<script th:src="@{js/jquery.magnific-popup.min.js}"></script>
	<script th:src="@{js/aos.js}"></script>
	<script th:src="@{js/jquery.animateNumber.min.js}"></script>
	<script th:src="@{js/bootstrap-datepicker.js}"></script>
	<script th:src="@{js/scrollax.min.js}"></script>
	<script th:src="@{https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false}"></script>
	<script th:src="@{js/google-map.js}"></script>
	<script th:src="@{js/main.js}"></script>
	<script th:src="@{slick/slick.js}"></script>
	<script th:src="@{slick/slick.min.js}"></script>
	<script th:src="@{js/slider.js}"></script>
	<script th:src="@{js/sewJoin.js}"></script>
	<script th:src="@{js/sewMyPage.js}"></script>
	<script th:src="@{js/updateLater.js}"></script>
	<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>	
	<script type="text/javascript">	
		String.prototype.replaceAll = function(org, dest) {
		    return this.split(org).join(dest);
		}		
		/*<![CDATA[*/
			var json = '[[${orderList}]]';
			json = json.replaceAll('&quot;', '"');
			var ol = JSON.parse(json);		
		/*]]>*/
		for(var i=0; i<ol.length; i++){
			var prodThumbName = ol[i].orderProdList[0].prodThumbName;
			var prodName = ol[i].orderProdList[0].prodName;
			var orderStat = ol[i].orderStat;			
			var orderDate = ol[i].orderDate;
			if(ol[i].orderProdList.length>1){
				var other = ol[i].orderProdList.length-1;
				if(orderStat=="배송 완료"){
					$("#listContentArea").append(									
						'<div class="goods_pay_section">'+
							'<div class="goods_group">'+
								'<ul class="goods_group_list">'+
									'<li class="goods_pay_item ">'+
										'<div class="goods_item">'+
											'<a href="#" class="goods_thumb">'+
												'<img src="/prodThumb/'+prodThumbName+'" width="90" height="90">'+										
											'</a>'+
											'<div class="goods_info">'+
												'<a href="#" class="goods">'+												
													'<p class="name">'+
														'<span>'+prodName+'</span>(외 <span>'+other+'</span>건)'+
													'</p>'+														
													'<ul class="info">'+
														'<li>'+
															'<span class="format-money">'+ol[i].totalCost+'</span><span class="won">원</span>'+
														'</li>'+
														'<li class="date">'+
															'<span>'+orderDate+'<span>'+
														'</li>'+
													'</ul>'+
												'</a>'+														
												'<p class="guide">'+orderStat+'</p>'+
											'</div>'+
										'</div>'+
										'<div class="button_item">'+
											'<button class="writeReviewBtn">리뷰쓰기</button>'+
										'</div>'+
									'</li>'+
								'</ul>'+
							'</div>'+
						'</div>'
					);	
				} else {
					$("#listContentArea").append(									
						'<div class="goods_pay_section">'+
							'<div class="goods_group">'+
								'<ul class="goods_group_list">'+
									'<li class="goods_pay_item ">'+
										'<div class="goods_item">'+
											'<a href="#" class="goods_thumb">'+
												'<img src="/prodThumb/'+prodThumbName+'" width="90" height="90">'+										
											'</a>'+
											'<div class="goods_info">'+
												'<a href="#" class="goods">'+												
													'<p class="name">'+
														'<span>'+prodName+'</span>(외 <span>'+other+'</span>건)'+
													'</p>'+														
													'<ul class="info">'+
														'<li>'+
															'<span class="format-money">'+ol[i].totalCost+'</span><span class="won">원</span>'+
														'</li>'+
														'<li class="date">'+
															'<span>'+orderDate+'<span>'+
														'</li>'+
													'</ul>'+
												'</a>'+														
												'<p class="guide">'+orderStat+'</p>'+
											'</div>'+
										'</div>'+										
									'</li>'+
								'</ul>'+
							'</div>'+
						'</div>'
					);		
				}
			} else {
				if(orderStat=="배송 완료"){
					$("#listContentArea").append(									
						'<div class="goods_pay_section">'+
							'<div class="goods_group">'+
								'<ul class="goods_group_list">'+
									'<li class="goods_pay_item ">'+
										'<div class="goods_item">'+
											'<a href="#" class="goods_thumb">'+
												'<img src="/prodThumb/'+prodThumbName+'" width="90" height="90">'+										
											'</a>'+
											'<div class="goods_info">'+
												'<a href="#" class="goods">'+
													'<p class="name">'+prodName+'</p>'+
													'<ul class="info">'+
														'<li>'+
															'<span class="format-money">'+ol[i].totalCost+'</span><span class="won">원</span>'+
														'</li>'+
														'<li class="date">'+
															'<span>'+orderDate+'<span>'+
														'</li>'+
													'</ul>'+
												'</a>'+														
												'<p class="guide">'+orderStat+'</p>'+
											'</div>'+
										'</div>'+	
										'<div class="button_item">'+
											'<button class="writeReviewBtn">리뷰쓰기</button>'+
										'</div>'+
									'</li>'+
								'</ul>'+
							'</div>'+
						'</div>'
					);	
				}else{
					$("#listContentArea").append(									
						'<div class="goods_pay_section">'+
							'<div class="goods_group">'+
								'<ul class="goods_group_list">'+
									'<li class="goods_pay_item ">'+
										'<div class="goods_item">'+
											'<a href="#" class="goods_thumb">'+
												'<img src="/prodThumb/'+prodThumbName+'" width="90" height="90">'+										
											'</a>'+
											'<div class="goods_info">'+
												'<a href="#" class="goods">'+
													'<p class="name">'+prodName+'</p>'+
													'<ul class="info">'+
														'<li>'+
															'<span class="format-money">'+ol[i].totalCost+'</span><span class="won">원</span>'+
														'</li>'+
														'<li class="date">'+
															'<span>'+orderDate+'<span>'+
														'</li>'+
													'</ul>'+
												'</a>'+														
												'<p class="guide">'+orderStat+'</p>'+
											'</div>'+
										'</div>'+										
									'</li>'+
								'</ul>'+
							'</div>'+
						'</div>'
					);	
				}					
			}
		}
		if(ol.length==4){
			$("#moreButton").append(
				'<button onclick="addOrderList()" type="button" class="btn btn-outline-dark moreBtn">더보기</button>'
			);
		}
		Number.prototype.format = function(){
		    if(this==0) return 0;
		
		    var reg = /(^[+-]?\d+)(\d{3})/;
		    var n = (this + '');
		
		    while (reg.test(n)) n = n.replace(reg, '$1' + ',' + '$2');
		
		    return n;
		};
		String.prototype.format = function(){
		    var num = parseFloat(this);
		    if( isNaN(num) ) return "0";
		
		    return num.format();
		};
		$('.format-money').text(function() {
		    $(this).text(
		        $(this).text().format()
		    );
		});
	</script> 
</body>
</html>